1. Setup a local build of dunesw (or at least dunereco) v09_90_00d00
2. Use ICEBERG_Waveform_Creator.C (A ROOT macro / gallery script) to put the data files into an easier-to-read format. Make sure to check the data products in the decoded data file that you want to use input by using eventdump.fcl -- I think they will only have tpcrawdecoder:daq objects and not tpcrawdecoder:sig object. You may need to lightly modify waveform creator to have the correct paths for the input and putput files and correct data products corresponding to the data in the input file.
3. In the Update_Noise_Model repo, the jupyter notebook Update_Noise_Model.ipynb will take you through the process of building and validating a data-driven noise model by reading in the TH2F histogram root file (output of ICEBERG_Waveform_Creator.C), taking the average absolute value of the FFT using a supporting python script. There is also a supporting plotting script to help create friendly views for the noise model, fractional differences, correlations.
4. There is a python script, convert_iceberg_noise_model.py, which will take a noise model in mV and convert it to the WireCell-friendly format.
5. Make sure WireCell has the correct noise model and correct simulation parameters. In particular, after you have built/compiled dunereco, copy the following files to the following places:
    a. iceberg_group_to_channel_map_incoh.json.bz2, iceberg_noise_model_incoh.json.bz2, iceberg-wires-larsoft-v2.json.bz2 to $WIRECELL_PATH (for me, it's $PATH_WHERE_I_INSTALLED_DUNESW/dunesw_v09_90_00d00/software/localProducts_dunesw_v09_90_00d00_e26_prof/dunereco/v09_90_00d00/wire-cell-cfg)
    b. Copy params.jsonnet (contains correct gain, resolution, shaping time) to $WIRECELL_PATH/pgrapher/experiment/iceberg or $PATH_WHERE_I_INSTALLED_DUNESW/dunesw_v09_90_00d00/software/localProducts_dunesw_v09_90_00d00_e26_prof/dunereco/v09_90_00d00/wire-cell-cfg/pgrapher/experiment/iceberg
6. Use icegen_ar39.fcl to simulate your ICEBERG noise + Ar39!
    a. Note that my current local version of the decay0 fcl involves me modifying the nominal Ar39 rate to be 100x that in nature... If you want to use normal radiological values, you can use dune_radiological_model_decay0.fcl, which is automatically on the FHICL_FILE_PATH when you install dunesw.
